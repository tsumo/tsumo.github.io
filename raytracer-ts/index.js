!function(t){var r={};function n(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)n.d(e,i,function(r){return t[r]}.bind(null,i));return e},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p="",n(n.s=0)}([function(t,r,n){"use strict";n.r(r);var e={x:0,y:1,z:0},i={x:0,y:0,z:0},o=function(t,r){return t.x*r.x+t.y*r.y+t.z*r.z},a=function(t,r){return{x:t.y*r.z-t.z*r.y,y:t.z*r.x-t.x*r.z,z:t.x*r.y-t.y*r.x}},u=function(t,r){return{x:t.x*r,y:t.y*r,z:t.z*r}},s=function(t){return u(t,1/function(t){return Math.sqrt(o(t,t))}(t))},c=function(t,r){return{x:t.x+r.x,y:t.y+r.y,z:t.z+r.z}},l=function(t,r,n){return{x:t.x+r.x+n.x,y:t.y+r.y+n.y,z:t.z+r.z+n.z}},f=function(t,r){return{x:t.x-r.x,y:t.y-r.y,z:t.z-r.z}},p=function(t,r){var n=u(r,o(t,r));return f(u(n,2),t)},y=function(t){return{x:t.r,y:t.g,z:t.b}},d=function(t,r,n){if(n>3)return{r:0,g:0,b:0};var e=x(t,r),i=e[0],o=e[1];if(i===1/0||null===o)return{r:255,g:255,b:255};var a=c(t.position,u(t.direction,i));return g(t,r,o,a,z(o,a),n)},x=function(t,r){for(var n=[1/0,null],e=0;e<r.spheres.length;e++){var i=r.spheres[e],o=b(i,t);null!=o&&o<n[0]&&(n[0]=o,n[1]=i)}return n},b=function(t,r){var n=f(t.position,r.position),e=o(n,r.direction),i=o(n,n),a=t.radius*t.radius-i+e*e;return a<0?void 0:e-Math.sqrt(a)},z=function(t,r){return s(f(r,t.position))},g=function(t,r,n,e,a,x){var b,z=y(n.color),g=i,v=0;if(n.lambert)for(var m=0;m<r.lights.length;m++){var M=r.lights[m];if(h(e,r,M)){var j=o(s(f(M,e)),a);j>0&&(v+=j)}}if(n.specular){var O={position:e,direction:p(t.direction,a)},P=d(O,r,x+1);g=c(g,u(y(P),n.specular))}return v=Math.min(1,v),{r:(b=l(g,u(z,v*n.lambert),u(z,n.ambient))).x,g:b.y,b:b.z}},h=function(t,r,n){return x({position:t,direction:s(f(t,n))},r)[0]>-.005},v={position:{x:0,y:1.8,z:10},fov:45,direction:{x:0,y:3,z:0}},m=[{x:-30,y:-10,z:20}],M=[{position:{x:0,y:3.5,z:-3},radius:3,color:{r:155,g:200,b:155},specular:.2,lambert:.7,ambient:.1},{position:{x:-4,y:2,z:-1},radius:.2,color:{r:155,g:155,b:155},specular:.2,lambert:.9,ambient:0},{position:{x:-4,y:3,z:-1},radius:.1,color:{r:255,g:255,b:255},specular:.2,lambert:.7,ambient:.1}];window.onload=function(){var t=document.createElement("canvas"),r=t.getContext("2d");if(r){t.style.display="block",t.style.margin="0 auto",t.style.width="640px",t.style.height="480px",t.style.imageRendering="crisp-edges",document.body.appendChild(t),t.width=320,t.height=240;var n=r.getImageData(0,0,320,240),i={camera:v,lights:m,spheres:M},o=0,c=0,p=function(){o+=.1,c+=.2,i.spheres[1].position.x=3.5*Math.sin(o),i.spheres[1].position.z=3.5*Math.cos(o)-3,i.spheres[2].position.x=4*Math.sin(c),i.spheres[2].position.z=4*Math.cos(c)-3,function(t,r,n,i,o){for(var c=t.camera,p=s(f(c.direction,c.position)),y=s(a(p,e)),x=s(a(y,p)),b=Math.PI*(c.fov/2)/180,z=n/r,g=Math.tan(b),h=z*g,v=2*g/(r-1),m=2*h/(n-1),M=0,j={r:0,g:0,b:0},O={position:c.position,direction:{x:0,y:0,z:0}},P=0;P<r;P++)for(var _=0;_<n;_++){var w=u(y,P*v-g),S=u(x,_*m-h);O.direction=s(l(p,w,S)),j=d(O,t,0),M=4*P+_*r*4,i.data[M+0]=j.r,i.data[M+1]=j.g,i.data[M+2]=j.b,i.data[M+3]=255}o.putImageData(i,0,0)}(i,320,240,n,r),requestAnimationFrame(p)};p()}}}]);