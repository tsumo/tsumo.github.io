(()=>{var e={426:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(645),i=n.n(o)()((function(e){return e[1]}));i.push([e.id,"* {\n  margin: 0;\n}\n\nhtml,\nbody {\n  width: 100%;\n  height: 100%;\n}\n\nbody {\n  background-color: #4e5052;\n}\n\ncanvas {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n#switcher {\n  position: absolute;\n  bottom: 1rem;\n  left: 1rem;\n}\n",""]);const r=i},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(o)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);o&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},466:function(e){var t;e.exports=((t=function(){function e(e){return i.appendChild(e.dom),e}function n(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";o=e}var o=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(e){e.preventDefault(),n(++o%i.children.length)}),!1);var r=(performance||Date).now(),a=r,s=0,l=e(new t.Panel("FPS","#0ff","#002")),c=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=e(new t.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:e,showPanel:n,begin:function(){r=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(c.update(e-r,200),e>a+1e3&&(l.update(1e3*s/(e-a),100),a=e,s=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){r=this.end()},domElement:i,setMode:n}}).Panel=function(e,t,n){var o=1/0,i=0,r=Math.round,a=r(window.devicePixelRatio||1),s=80*a,l=48*a,c=3*a,u=2*a,d=3*a,h=15*a,f=74*a,p=30*a,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var _=m.getContext("2d");return _.font="bold "+9*a+"px Helvetica,Arial,sans-serif",_.textBaseline="top",_.fillStyle=n,_.fillRect(0,0,s,l),_.fillStyle=t,_.fillText(e,c,u),_.fillRect(d,h,f,p),_.fillStyle=n,_.globalAlpha=.9,_.fillRect(d,h,f,p),{dom:m,update:function(l,v){o=Math.min(o,l),i=Math.max(i,l),_.fillStyle=n,_.globalAlpha=1,_.fillRect(0,0,s,h),_.fillStyle=t,_.fillText(r(l)+" "+e+" ("+r(o)+"-"+r(i)+")",c,u),_.drawImage(m,d+a,h,f-a,p,d,h,f-a,p),_.fillRect(d+f-a,h,a,p),_.fillStyle=n,_.globalAlpha=.9,_.fillRect(d+f-a,h,a,r((1-l/v)*p))}}},t)},379:(e,t,n)=>{"use strict";var o,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function a(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},o=[],i=0;i<e.length;i++){var s=e[i],l=t.base?s[0]+t.base:s[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var d=a(u),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(r[d].references++,r[d].updater(h)):r.push({identifier:u,updater:m(h,t),references:1}),o.push(u)}return o}function l(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var r=n.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,o){var i=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var r=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function h(e,t,n){var o=n.css,i=n.media,r=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var f=null,p=0;function m(e,t){var n,o,i;if(t.singleton){var r=p++;n=f||(f=l(t)),o=d.bind(null,n,r,!1),i=d.bind(null,n,r,!0)}else n=l(t),o=h.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var i=a(n[o]);r[i].references--}for(var l=s(e,t),c=0;c<n.length;c++){var u=a(n[c]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}n=l}}}},51:e=>{"use strict";e.exports="#version 300 es\n\nprecision mediump float;\n\nin vec3 v_color;\n\nout vec4 finalColor;\n\nvoid main(void) {\n  finalColor = vec4(v_color, 1);\n}\n"},528:e=>{"use strict";e.exports="#version 300 es\n\nin vec3 a_position;\nin vec3 a_color;\n\nuniform mat4 u_matrix;\n\nout vec3 v_color;\n\nvoid main(void) {\n  gl_Position = u_matrix * vec4(a_position, 1);\n\n  v_color = a_color;\n}\n"},584:e=>{"use strict";e.exports="#version 300 es\n\nprecision mediump float;\n\nin vec4 v_color;\n\nout vec4 finalColor;\n\nvoid main(void) {\n  finalColor = v_color;\n}\n"},778:e=>{"use strict";e.exports="#version 300 es\n\nin vec4 a_position;\nin vec4 a_color;\n\nuniform mat4 u_matrix;\n\nout vec4 v_color;\n\nvoid main(void) {\n  gl_Position = u_matrix * a_position;\n\n  v_color = a_color;\n}\n"},446:e=>{"use strict";e.exports="#version 300 es\n\nprecision mediump float;\n\nin vec3 v_color;\n\nout vec4 finalColor;\n\nvoid main(void) {\n  finalColor = vec4(v_color, 1);\n}\n"},10:e=>{"use strict";e.exports="#version 300 es\n\nin vec3 a_position;\nin vec3 a_color;\n\nuniform mat4 u_matrix;\n\nout vec3 v_color;\n\nvoid main(void) {\n  gl_Position = u_matrix * vec4(a_position, 1);\n\n  v_color = a_color;\n}\n"},37:e=>{"use strict";e.exports="#version 300 es\n\nprecision mediump float;\n\nout vec4 finalColor;\n\nvoid main(void) {\n  finalColor = vec4(1.0);\n}\n"},189:e=>{"use strict";e.exports="#version 300 es\n\nin vec2 a_position;\n\nvoid main(void) {\n  gl_PointSize = 50.0;\n  gl_Position = vec4(a_position, 0.0, 1.0);\n}\n"},802:e=>{"use strict";e.exports="#version 300 es\n\nprecision mediump float;\n\nuniform vec4 u_pointColor;\n\nout vec4 finalColor;\n\nvoid main(void) {\n  finalColor = u_pointColor;\n}\n"},800:e=>{"use strict";e.exports="#version 300 es\n\nin vec3 a_position;\n\nuniform float u_pointSize;\nuniform float u_angle;\n\nvoid main(void) {\n  gl_PointSize = u_pointSize;\n  gl_Position = vec4(\n    cos(u_angle) * 0.8 + a_position.x,\n    sin(u_angle) * 0.8 + a_position.y,\n    a_position.z,\n    1.0\n  );\n}\n"},389:e=>{"use strict";e.exports="#version 300 es\n\nprecision mediump float;\n\nout vec4 finalColor;\n\nvoid main(void) {\n  finalColor = vec4(1.0, 1.0, 1.0, 1.0);\n}\n"},827:e=>{"use strict";e.exports="#version 300 es\n\nin vec3 a_position;\n\nuniform float u_angle;\n\nvoid main(void) {\n  gl_PointSize = 10.0 + sin(u_angle * 5.0) * 5.0;\n  gl_Position = vec4(\n    cos(u_angle) * 0.8 + a_position.x,\n    sin(u_angle) * 0.8 + a_position.y,\n    a_position.z,\n    1.0\n  );\n}\n"},565:e=>{"use strict";e.exports="#version 300 es\n\nprecision mediump float;\n\nin vec4 color;\n\nout vec4 finalColor;\n\nvoid main(void) {\n  finalColor = color;\n}\n"},290:e=>{"use strict";e.exports="#version 300 es\n\nin vec3 a_position;\n\nuniform vec3 u_color[2];\n\nout lowp vec4 color;\n\nvoid main(void) {\n  color = vec4(u_color[ int(a_position.z) ], 1.0);\n  gl_Position = vec4(a_position.xy, 0.0, 1.0);\n}\n"},322:e=>{"use strict";e.exports="#version 300 es\n\nprecision mediump float;\n\nout vec4 finalColor;\n\nvoid main(void) {\n  finalColor = vec4(1);\n}\n"},107:e=>{"use strict";e.exports="#version 300 es\n\nin vec2 a_position;\n\nuniform vec2 u_resolution;\nuniform mat3 u_matrix;\n\nvoid main(void) {\n  float ratio = u_resolution.x / u_resolution.y;\n\n  vec2 ratioCorrectedPosition = vec2(a_position.x, a_position.y * ratio);\n\n  vec2 transformedPosition = (u_matrix * vec3(a_position, 1)).xy;\n\n  gl_Position = vec4(transformedPosition, 0.0, 1.0);\n}\n"}},t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={id:o,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(379),t=n.n(e),o=n(426);t()(o.Z,{insert:"head",singleton:!1}),o.Z.locals;var i="undefined"!=typeof Float32Array?Float32Array:Array;Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var r=Math.random,a=(Math.floor,Math.PI),s=(Math.sin,Math.cos,Math.sqrt,Math.atan2,Math.acos,function(e){throw console.warn(e),new Error("This should be unreachable!")}),l=function(e){return void 0===e&&(e=1),r()*e},c=a/180,u=function(e){return e*c},d=function(){function e(e,t,n,o,i){this.gl=e;var r=this.createShader(e.VERTEX_SHADER,t),a=this.createShader(e.FRAGMENT_SHADER,n);this.attributes=i;var s=this.createProgram(r,a);this.program=s,this.uniforms=o,this.resolutionLocation=e.getUniformLocation(s,"u_resolution");var l={};for(var c in o)l[c]=e.getUniformLocation(s,"u_"+c);this.locations=l}return e.prototype.use=function(){this.gl.useProgram(this.program)},e.prototype.setUniform=function(e,t){var n=this.gl,o=this.uniforms[e];switch(o.type){case"f":n.uniform1f(this.locations[e],t);break;case"2f":case"2fv":n.uniform2fv(this.locations[e],t);break;case"3f":case"3fv":n.uniform3fv(this.locations[e],t);break;case"matrix3fv":n.uniformMatrix3fv(this.locations[e],!1,t);break;case"4f":case"4fv":n.uniform4fv(this.locations[e],t);break;case"matrix4fv":n.uniformMatrix4fv(this.locations[e],!1,t);break;default:s(o)}},e.prototype.setStandardUniforms=function(){this.gl.uniform2f(this.resolutionLocation,this.gl.canvas.width,this.gl.canvas.height)},e.prototype.createShader=function(e,t){var n=this.gl,o=n.createShader(e);if(null===o)throw new Error("Cannot create shader");if(n.shaderSource(o,t),n.compileShader(o),!n.getShaderParameter(o,n.COMPILE_STATUS))throw console.warn(n.getShaderInfoLog(o)),n.deleteShader(o),new Error("Cannot compile shader");return o},e.prototype.createProgram=function(e,t){var n=this.gl,o=n.createProgram();if(null===o)throw new Error("Cannot create program");if(n.attachShader(o,e),n.attachShader(o,t),this.attributes.forEach((function(e,t){n.bindAttribLocation(o,t,e)})),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw console.warn(n.getProgramInfoLog(o)),n.deleteProgram(o),new Error("Cannot link program");if(n.validateProgram(o),!n.getProgramParameter(o,n.VALIDATE_STATUS))throw console.warn(n.getProgramInfoLog(o)),n.deleteProgram(o),new Error("Program validation error");return n.detachShader(o,e),n.detachShader(o,t),n.deleteShader(e),n.deleteShader(t),o},e.prototype.destroy=function(){var e=this.gl;e.getParameter(e.CURRENT_PROGRAM)===this.program&&this.gl.useProgram(null),e.deleteProgram(this.program)},e}(),h=function(){function e(e){this.gl=e,this.canvasObserver=new ResizeObserver(this.updateCanvas.bind(this)),this.canvasObserver.observe(e.canvas)}return e.prototype.clear=function(){var e=this.gl;e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)},e.prototype.updateCanvas=function(){var e=this.gl.canvas,t=e.getBoundingClientRect();e.width===t.width&&e.height===t.width||(e.width=t.width*window.devicePixelRatio,e.height=t.height*window.devicePixelRatio,this.gl.viewport(0,0,e.width,e.height))},e.prototype.destroy=function(){this.canvasObserver.disconnect()},e}(),f=function(){function e(e,t,n,o,i){this.gl=e,this.name=t,this.size=o,this.count=n.length/this.size,this.location=e.getAttribLocation(i.program,t),this.buffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW)}return e.prototype.prepare=function(){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.enableVertexAttribArray(this.location),e.vertexAttribPointer(this.location,this.size,e.FLOAT,!1,0,0)},e.prototype.draw=function(e){this.gl.drawArrays(e,0,this.count)},e.prototype.drawPoints=function(){this.draw(this.gl.POINTS)},e.prototype.drawLines=function(){this.draw(this.gl.LINES)},e.prototype.drawTriangles=function(){this.draw(this.gl.TRIANGLES)},e.prototype.swapProgram=function(e){this.location=this.gl.getAttribLocation(e.program,this.name)},e.prototype.destroy=function(){},e}(),p=n(189),m=n(37);function _(e,t){var n=e.__state.conversionName.toString(),o=Math.round(e.r),i=Math.round(e.g),r=Math.round(e.b),a=e.a,s=Math.round(e.h),l=e.s.toFixed(1),c=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var u=e.hex.toString(16);u.length<6;)u="0"+u;return"#"+u}return"CSS_RGB"===n?"rgb("+o+","+i+","+r+")":"CSS_RGBA"===n?"rgba("+o+","+i+","+r+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+o+","+i+","+r+"]":"RGBA_ARRAY"===n?"["+o+","+i+","+r+","+a+"]":"RGB_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+"}":"RGBA_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+l+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+l+",v:"+c+",a:"+a+"}":"unknown format"}var v=Array.prototype.forEach,g=Array.prototype.slice,b={BREAK:{},extend:function(e){return this.each(g.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(g.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=g.call(arguments);return function(){for(var t=g.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(v&&e.forEach&&e.forEach===v)e.forEach(t,n);else if(e.length===e.length+0){var o,i=void 0;for(i=0,o=e.length;i<o;i++)if(i in e&&t.call(n,e[i],i)===this.BREAK)return}else for(var r in e)if(t.call(n,e[r],r)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var o=void 0;return function(){var i=this,r=arguments;function a(){o=null,n||e.apply(i,r)}var s=n||!o;clearTimeout(o),o=setTimeout(a,t),s&&e.apply(i,r)}},toArray:function(e){return e.toArray?e.toArray():g.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},y=[{litmus:b.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:_},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:_},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:_},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:_}}},{litmus:b.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:b.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:b.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(b.isNumber(e.r)&&b.isNumber(e.g)&&b.isNumber(e.b)&&b.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(b.isNumber(e.r)&&b.isNumber(e.g)&&b.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(b.isNumber(e.h)&&b.isNumber(e.s)&&b.isNumber(e.v)&&b.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(b.isNumber(e.h)&&b.isNumber(e.s)&&b.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],w=void 0,x=void 0,E=function(){x=!1;var e=arguments.length>1?b.toArray(arguments):arguments[0];return b.each(y,(function(t){if(t.litmus(e))return b.each(t.conversions,(function(t,n){if(w=t.read(e),!1===x&&!1!==w)return x=w,w.conversionName=n,w.conversion=t,b.BREAK})),b.BREAK})),x},A=void 0,C={hsv_to_rgb:function(e,t,n){var o=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),r=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=[[n,s,r],[a,n,r],[r,n,s],[r,a,n],[s,r,n],[n,r,a]][o];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var o=Math.min(e,t,n),i=Math.max(e,t,n),r=i-o,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=e===i?(t-n)/r:t===i?2+(n-e)/r:4+(e-t)/r,(a/=6)<0&&(a+=1),{h:360*a,s:r/i,v:i/255})},rgb_to_hex:function(e,t,n){var o=this.hex_with_component(0,2,e);return o=this.hex_with_component(o,1,t),this.hex_with_component(o,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(A=8*t)|e&~(255<<A)}},S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),L=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0},O=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},M=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},R=function(){function e(){if(k(this,e),this.__state=E.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return T(e,[{key:"toString",value:function(){return _(this)}},{key:"toHexString",value:function(){return _(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function P(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||R.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(R.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function F(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||R.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(R.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}R.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=C.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");b.extend(e.__state,C.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},R.recalculateHSV=function(e){var t=C.rgb_to_hsv(e.r,e.g,e.b);b.extend(e.__state,{s:t.s,v:t.v}),b.isNaN(t.h)?b.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},R.COMPONENTS=["r","g","b","h","s","v","hex","a"],P(R.prototype,"r",2),P(R.prototype,"g",1),P(R.prototype,"b",0),F(R.prototype,"h"),F(R.prototype,"s"),F(R.prototype,"v"),Object.defineProperty(R.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(R.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=C.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var B=function(){function e(t,n){k(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return T(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),D={};b.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){b.each(e,(function(e){D[e]=t}))}));var N=/(\d+(\.\d+)?)px/;function U(e){if("0"===e||b.isUndefined(e))return 0;var t=e.match(N);return b.isNull(t)?0:parseFloat(t[1])}var z={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var o=n,i=t;b.isUndefined(i)&&(i=!0),b.isUndefined(o)&&(o=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),o&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,o){var i=n||{},r=D[t];if(!r)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(r);switch(r){case"MouseEvents":var s=i.x||i.clientX||0,l=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,s,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;b.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}b.defaults(a,o),e.dispatchEvent(a)},bind:function(e,t,n,o){var i=o||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),z},unbind:function(e,t,n,o){var i=o||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),z},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return z},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),o=n.indexOf(t);-1!==o&&(n.splice(o,1),e.className=n.join(" "))}else e.className=void 0;return z},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return U(t["border-left-width"])+U(t["border-right-width"])+U(t["padding-left"])+U(t["padding-right"])+U(t.width)},getHeight:function(e){var t=getComputedStyle(e);return U(t["border-top-width"])+U(t["border-bottom-width"])+U(t["padding-top"])+U(t["padding-bottom"])+U(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},j=function(e){function t(e,n){k(this,t);var o=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o;return o.__prev=o.getValue(),o.__checkbox=document.createElement("input"),o.__checkbox.setAttribute("type","checkbox"),z.bind(o.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),o.domElement.appendChild(o.__checkbox),o.updateDisplay(),o}return O(t,e),T(t,[{key:"setValue",value:function(e){var n=L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(B),H=function(e){function t(e,n,o){k(this,t);var i=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=o,a=i;if(i.__select=document.createElement("select"),b.isArray(r)){var s={};b.each(r,(function(e){s[e]=e})),r=s}return b.each(r,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)})),i.updateDisplay(),z.bind(i.__select,"change",(function(){var e=this.options[this.selectedIndex].value;a.setValue(e)})),i.domElement.appendChild(i.__select),i}return O(t,e),T(t,[{key:"setValue",value:function(e){var n=L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return z.isActive(this.__select)?this:(this.__select.value=this.getValue(),L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(B),I=function(e){function t(e,n){k(this,t);var o=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o;function r(){i.setValue(i.__input.value)}return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),z.bind(o.__input,"keyup",r),z.bind(o.__input,"change",r),z.bind(o.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),z.bind(o.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return O(t,e),T(t,[{key:"updateDisplay",value:function(){return z.isActive(this.__input)||(this.__input.value=this.getValue()),L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(B);function V(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var G=function(e){function t(e,n,o){k(this,t);var i=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=o||{};return i.__min=r.min,i.__max=r.max,i.__step=r.step,b.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=V(i.__impliedStep),i}return O(t,e),T(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=V(e),this}}]),t}(B),K=function(e){function t(e,n,o){k(this,t);var i=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));i.__truncationSuspended=!1;var r=i,a=void 0;function s(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}function l(e){var t=a-e.clientY;r.setValue(r.getValue()+t*r.__impliedStep),a=e.clientY}function c(){z.unbind(window,"mousemove",l),z.unbind(window,"mouseup",c),s()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),z.bind(i.__input,"change",(function(){var e=parseFloat(r.__input.value);b.isNaN(e)||r.setValue(e)})),z.bind(i.__input,"blur",(function(){s()})),z.bind(i.__input,"mousedown",(function(e){z.bind(window,"mousemove",l),z.bind(window,"mouseup",c),a=e.clientY})),z.bind(i.__input,"keydown",(function(e){13===e.keyCode&&(r.__truncationSuspended=!0,this.blur(),r.__truncationSuspended=!1,s())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return O(t,e),T(t,[{key:"updateDisplay",value:function(){var e,n,o;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,o=Math.pow(10,n),Math.round(e*o)/o),L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(G);function Y(e,t,n,o,i){return o+(e-t)/(n-t)*(i-o)}var X=function(e){function t(e,n,o,i,r){k(this,t);var a=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:o,max:i,step:r})),s=a;function l(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue(Y(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function c(){z.unbind(window,"mousemove",l),z.unbind(window,"mouseup",c),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function u(e){var t=e.touches[0].clientX,n=s.__background.getBoundingClientRect();s.setValue(Y(t,n.left,n.right,s.__min,s.__max))}function d(){z.unbind(window,"touchmove",u),z.unbind(window,"touchend",d),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),z.bind(a.__background,"mousedown",(function(e){document.activeElement.blur(),z.bind(window,"mousemove",l),z.bind(window,"mouseup",c),l(e)})),z.bind(a.__background,"touchstart",(function(e){1===e.touches.length&&(z.bind(window,"touchmove",u),z.bind(window,"touchend",d),u(e))})),z.addClass(a.__background,"slider"),z.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return O(t,e),T(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",L(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(G),W=function(e){function t(e,n,o){k(this,t);var i=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===o?"Fire":o,z.bind(i.__button,"click",(function(e){return e.preventDefault(),r.fire(),!1})),z.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return O(t,e),T(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(B),Q=function(e){function t(e,n){k(this,t);var o=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.__color=new R(o.getValue()),o.__temp=new R(0);var i=o;o.domElement=document.createElement("div"),z.makeSelectable(o.domElement,!1),o.__selector=document.createElement("div"),o.__selector.className="selector",o.__saturation_field=document.createElement("div"),o.__saturation_field.className="saturation-field",o.__field_knob=document.createElement("div"),o.__field_knob.className="field-knob",o.__field_knob_border="2px solid ",o.__hue_knob=document.createElement("div"),o.__hue_knob.className="hue-knob",o.__hue_field=document.createElement("div"),o.__hue_field.className="hue-field",o.__input=document.createElement("input"),o.__input.type="text",o.__input_textShadow="0 1px 1px ",z.bind(o.__input,"keydown",(function(e){13===e.keyCode&&d.call(this)})),z.bind(o.__input,"blur",d),z.bind(o.__selector,"mousedown",(function(){z.addClass(this,"drag").bind(window,"mouseup",(function(){z.removeClass(i.__selector,"drag")}))})),z.bind(o.__selector,"touchstart",(function(){z.addClass(this,"drag").bind(window,"touchend",(function(){z.removeClass(i.__selector,"drag")}))}));var r,a=document.createElement("div");function s(e){f(e),z.bind(window,"mousemove",f),z.bind(window,"touchmove",f),z.bind(window,"mouseup",c),z.bind(window,"touchend",c)}function l(e){p(e),z.bind(window,"mousemove",p),z.bind(window,"touchmove",p),z.bind(window,"mouseup",u),z.bind(window,"touchend",u)}function c(){z.unbind(window,"mousemove",f),z.unbind(window,"touchmove",f),z.unbind(window,"mouseup",c),z.unbind(window,"touchend",c),h()}function u(){z.unbind(window,"mousemove",p),z.unbind(window,"touchmove",p),z.unbind(window,"mouseup",u),z.unbind(window,"touchend",u),h()}function d(){var e=E(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function h(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function f(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,o=n.clientX,r=n.clientY,a=(o-t.left)/(t.right-t.left),s=1-(r-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return b.extend(o.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),b.extend(o.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:o.__field_knob_border+(o.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),b.extend(o.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),b.extend(o.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),b.extend(a.style,{width:"100%",height:"100%",background:"none"}),q(a,"top","rgba(0,0,0,0)","#000"),b.extend(o.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(r=o.__hue_field).style.background="",r.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",r.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",r.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",r.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",r.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",b.extend(o.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:o.__input_textShadow+"rgba(0,0,0,0.7)"}),z.bind(o.__saturation_field,"mousedown",s),z.bind(o.__saturation_field,"touchstart",s),z.bind(o.__field_knob,"mousedown",s),z.bind(o.__field_knob,"touchstart",s),z.bind(o.__hue_field,"mousedown",l),z.bind(o.__hue_field,"touchstart",l),o.__saturation_field.appendChild(a),o.__selector.appendChild(o.__field_knob),o.__selector.appendChild(o.__saturation_field),o.__selector.appendChild(o.__hue_field),o.__hue_field.appendChild(o.__hue_knob),o.domElement.appendChild(o.__input),o.domElement.appendChild(o.__selector),o.updateDisplay(),o}return O(t,e),T(t,[{key:"updateDisplay",value:function(){var e=E(this.getValue());if(!1!==e){var t=!1;b.each(R.COMPONENTS,(function(n){if(!b.isUndefined(e[n])&&!b.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&b.extend(this.__color.__state,e)}b.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,o=255-n;b.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,q(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),b.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}}]),t}(B),J=["-moz-","-o-","-webkit-","-ms-",""];function q(e,t,n,o){e.style.background="",b.each(J,(function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+o+" 100%); "}))}var Z='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',$=function(e,t){var n=e[t];return b.isArray(arguments[2])||b.isObject(arguments[2])?new H(e,t,arguments[2]):b.isNumber(n)?b.isNumber(arguments[2])&&b.isNumber(arguments[3])?b.isNumber(arguments[4])?new X(e,t,arguments[2],arguments[3],arguments[4]):new X(e,t,arguments[2],arguments[3]):b.isNumber(arguments[4])?new K(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new K(e,t,{min:arguments[2],max:arguments[3]}):b.isString(n)?new I(e,t):b.isFunction(n)?new W(e,t,""):b.isBoolean(n)?new j(e,t):null},ee=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},te=function(){function e(){k(this,e),this.backgroundElement=document.createElement("div"),b.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),z.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),b.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;z.bind(this.backgroundElement,"click",(function(){t.hide()}))}return T(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),b.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",z.unbind(e.domElement,"webkitTransitionEnd",t),z.unbind(e.domElement,"transitionend",t),z.unbind(e.domElement,"oTransitionEnd",t)};z.bind(this.domElement,"webkitTransitionEnd",t),z.bind(this.domElement,"transitionend",t),z.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-z.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-z.getHeight(this.domElement)/2+"px"}}]),e}();!function(e,t){var n=t||document,o=document.createElement("style");o.type="text/css",o.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(o)}catch(e){}}(function(e){if("undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var ne="Default",oe=function(){try{return!!window.localStorage}catch(e){return!1}}(),ie=void 0,re=!0,ae=void 0,se=!1,le=[],ce=function e(t){var n=this,o=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),z.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],o=b.defaults(o,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),o=b.defaults(o,{resizable:o.autoPlace,hideable:o.autoPlace}),b.isUndefined(o.load)?o.load={preset:ne}:o.preset&&(o.load.preset=o.preset),b.isUndefined(o.parent)&&o.hideable&&le.push(this),o.resizable=b.isUndefined(o.parent)&&o.resizable,o.autoPlace&&b.isUndefined(o.scrollable)&&(o.scrollable=!0);var i,r=oe&&"true"===localStorage.getItem(me(0,"isLocal")),a=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return o.parent}},scrollable:{get:function(){return o.scrollable}},autoPlace:{get:function(){return o.autoPlace}},closeOnTop:{get:function(){return o.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:o.load.preset},set:function(e){n.parent?n.getRoot().preset=e:o.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return o.width},set:function(e){o.width=e,ye(n,e)}},name:{get:function(){return o.name},set:function(e){o.name=e,s&&(s.innerHTML=o.name)}},closed:{get:function(){return o.closed},set:function(t){o.closed=t,o.closed?z.addClass(n.__ul,e.CLASS_CLOSED):z.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return o.load}},useLocalStorage:{get:function(){return r},set:function(e){oe&&(r=e,e?z.bind(window,"unload",a):z.unbind(window,"unload",a),localStorage.setItem(me(0,"isLocal"),e))}}}),b.isUndefined(o.parent)){if(this.closed=o.closed||!1,z.addClass(this.domElement,e.CLASS_MAIN),z.makeSelectable(this.domElement,!1),oe&&r){n.useLocalStorage=!0;var l=localStorage.getItem(me(0,"gui"));l&&(o.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,z.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),o.closeOnTop?(z.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(z.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),z.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===o.closed&&(o.closed=!0);var c=document.createTextNode(o.name);z.addClass(c,"controller-name"),s=ue(n,c),z.addClass(this.__ul,e.CLASS_CLOSED),z.addClass(s,"title"),z.bind(s,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),o.closed||(this.closed=!1)}o.autoPlace&&(b.isUndefined(o.parent)&&(re&&(ae=document.createElement("div"),z.addClass(ae,"dg"),z.addClass(ae,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(ae),re=!1),ae.appendChild(this.domElement),z.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||ye(n,o.width)),this.__resizeHandler=function(){n.onResizeDebounced()},z.bind(window,"resize",this.__resizeHandler),z.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),z.bind(this.__ul,"transitionend",this.__resizeHandler),z.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),o.resizable&&be(this),a=function(){oe&&"true"===localStorage.getItem(me(0,"isLocal"))&&localStorage.setItem(me(0,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,o.parent||((i=n.getRoot()).width+=1,b.defer((function(){i.width-=1})))};function ue(e,t,n){var o=document.createElement("li");return t&&o.appendChild(t),n?e.__ul.insertBefore(o,n):e.__ul.appendChild(o),e.onResize(),o}function de(e){z.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&z.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function he(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function fe(e,t){var n=e.getRoot(),o=n.__rememberedObjects.indexOf(t.object);if(-1!==o){var i=n.__rememberedObjectIndecesToControllers[o];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[o]=i),i[t.property]=t,n.load&&n.load.remembered){var r=n.load.remembered,a=void 0;if(r[e.preset])a=r[e.preset];else{if(!r.Default)return;a=r.Default}if(a[o]&&void 0!==a[o][t.property]){var s=a[o][t.property];t.initialValue=s,t.setValue(s)}}}}function pe(e,t,n,o){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(o.color)i=new Q(t,n);else{var r=[t,n].concat(o.factoryArgs);i=$.apply(e,r)}o.before instanceof B&&(o.before=o.before.__li),fe(e,i),z.addClass(i.domElement,"c");var a=document.createElement("span");z.addClass(a,"property-name"),a.innerHTML=i.property;var s=document.createElement("div");s.appendChild(a),s.appendChild(i.domElement);var l=ue(e,s,o.before);return z.addClass(l,ce.CLASS_CONTROLLER_ROW),i instanceof Q?z.addClass(l,"color"):z.addClass(l,S(i.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,b.extend(n,{options:function(t){if(arguments.length>1){var o=n.__li.nextElementSibling;return n.remove(),pe(e,n.object,n.property,{before:o,factoryArgs:[b.toArray(arguments)]})}if(b.isArray(t)||b.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),pe(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof X){var o=new K(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});b.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],i=o[e];n[e]=o[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(o,e),t.apply(n,e)}})),z.addClass(t,"has-slider"),n.domElement.insertBefore(o.domElement,n.domElement.firstElementChild)}else if(n instanceof K){var i=function(t){if(b.isNumber(n.__min)&&b.isNumber(n.__max)){var o=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var r=pe(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return r.name(o),i&&r.listen(),r}return t};n.min=b.compose(i,n.min),n.max=b.compose(i,n.max)}else n instanceof j?(z.bind(t,"click",(function(){z.fakeEvent(n.__checkbox,"click")})),z.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof W?(z.bind(t,"click",(function(){z.fakeEvent(n.__button,"click")})),z.bind(t,"mouseover",(function(){z.addClass(n.__button,"hover")})),z.bind(t,"mouseout",(function(){z.removeClass(n.__button,"hover")}))):n instanceof Q&&(z.addClass(t,"color"),n.updateDisplay=b.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=b.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&he(e.getRoot(),!0),t}),n.setValue)}(e,l,i),e.__controllers.push(i),i}function me(e,t){return document.location.href+"."+t}function _e(e,t,n){var o=document.createElement("option");o.innerHTML=t,o.value=t,e.__preset_select.appendChild(o),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function ve(e,t){t.style.display=e.useLocalStorage?"block":"none"}function ge(e){var t=e.__save_row=document.createElement("li");z.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),z.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",z.addClass(n,"button gears");var o=document.createElement("span");o.innerHTML="Save",z.addClass(o,"button"),z.addClass(o,"save");var i=document.createElement("span");i.innerHTML="New",z.addClass(i,"button"),z.addClass(i,"save-as");var r=document.createElement("span");r.innerHTML="Revert",z.addClass(r,"button"),z.addClass(r,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?b.each(e.load.remembered,(function(t,n){_e(e,n,n===e.preset)})):_e(e,ne,!1),z.bind(a,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(a),t.appendChild(n),t.appendChild(o),t.appendChild(i),t.appendChild(r),oe){var s=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(me(0,"isLocal"))&&l.setAttribute("checked","checked"),ve(e,s),z.bind(l,"change",(function(){e.useLocalStorage=!e.useLocalStorage,ve(e,s)}))}var c=document.getElementById("dg-new-constructor");z.bind(c,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||ie.hide()})),z.bind(n,"click",(function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),ie.show(),c.focus(),c.select()})),z.bind(o,"click",(function(){e.save()})),z.bind(i,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),z.bind(r,"click",(function(){e.revert()}))}function be(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function o(){z.removeClass(e.__closeButton,ce.CLASS_DRAG),z.unbind(window,"mousemove",n),z.unbind(window,"mouseup",o)}function i(i){return i.preventDefault(),t=i.clientX,z.addClass(e.__closeButton,ce.CLASS_DRAG),z.bind(window,"mousemove",n),z.bind(window,"mouseup",o),!1}e.__resize_handle=document.createElement("div"),b.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),z.bind(e.__resize_handle,"mousedown",i),z.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function ye(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function we(e,t){var n={};return b.each(e.__rememberedObjects,(function(o,i){var r={},a=e.__rememberedObjectIndecesToControllers[i];b.each(a,(function(e,n){r[n]=t?e.initialValue:e.getValue()})),n[i]=r})),n}function xe(e){0!==e.length&&ee.call(window,(function(){xe(e)})),b.each(e,(function(e){e.updateDisplay()}))}ce.toggleHide=function(){se=!se,b.each(le,(function(e){e.domElement.style.display=se?"none":""}))},ce.CLASS_AUTO_PLACE="a",ce.CLASS_AUTO_PLACE_CONTAINER="ac",ce.CLASS_MAIN="main",ce.CLASS_CONTROLLER_ROW="cr",ce.CLASS_TOO_TALL="taller-than-window",ce.CLASS_CLOSED="closed",ce.CLASS_CLOSE_BUTTON="close-button",ce.CLASS_CLOSE_TOP="close-top",ce.CLASS_CLOSE_BOTTOM="close-bottom",ce.CLASS_DRAG="drag",ce.DEFAULT_WIDTH=245,ce.TEXT_CLOSED="Close Controls",ce.TEXT_OPEN="Open Controls",ce._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||ce.toggleHide()},z.bind(window,"keydown",ce._keydownHandler,!1),b.extend(ce.prototype,{add:function(e,t){return pe(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return pe(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;b.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&ae.removeChild(this.domElement);var e=this;b.each(this.__folders,(function(t){e.removeFolder(t)})),z.unbind(window,"keydown",ce._keydownHandler,!1),de(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new ce(t);this.__folders[e]=n;var o=ue(this,n.domElement);return z.addClass(o,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],de(e);var t=this;b.each(e.__folders,(function(t){e.removeFolder(t)})),b.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=z.getOffset(e.__ul).top,n=0;b.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=z.getHeight(t))})),window.innerHeight-t-20<n?(z.addClass(e.domElement,ce.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(z.removeClass(e.domElement,ce.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&b.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:b.debounce((function(){this.onResize()}),50),remember:function(){if(b.isUndefined(ie)&&((ie=new te).domElement.innerHTML=Z),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;b.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&ge(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&ye(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=we(this)),e.folders={},b.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=we(this),he(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=we(this,!0)),this.load.remembered[e]=we(this),this.preset=e,_e(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){b.each(this.__controllers,(function(t){this.getRoot().load.remembered?fe(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),b.each(this.__folders,(function(e){e.revert(e)})),e||he(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&xe(this.__listening)},updateDisplay:function(){b.each(this.__controllers,(function(e){e.updateDisplay()})),b.each(this.__folders,(function(e){e.updateDisplay()}))}});var Ee,Ae=ce;function Ce(){var e=new i(3);return i!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Se(e){var t=new i(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function ke(e,t,n){var o=new i(3);return o[0]=e,o[1]=t,o[2]=n,o}function Te(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Le(e,t,n,o){var i=t[0],r=t[1],a=t[2];return e[0]=i+o*(n[0]-i),e[1]=r+o*(n[1]-r),e[2]=a+o*(n[2]-a),e}function Oe(e){return e[0]=0,e[1]=0,e[2]=0,e}Ee=new i(2),i!=Float32Array&&(Ee[0]=0,Ee[1]=0);var Me=(Ce(),function(e){var t=new Ae;this.values={};var n=function(n){var r=e[n];switch(r.type){case"float":o.values[n]=r.default,t.add(o.values,n,r.min,r.max,r.step);break;case"vec2":var a=function(e,t){var n=new i(2);return n[0]=e,n[1]=t,n}(r.default[0],r.default[1]);o.values[n]=a;var l=t.addFolder(n);l.open(),l.add(a,"0",r.min,r.max,r.step).name("x"),l.add(a,"1",r.min,r.max,r.step).name("y");break;case"vec3":var c=ke(r.default[0],r.default[1],r.default[2]);o.values[n]=c;var u=t.addFolder(n);u.open(),u.add(c,"0",r.min,r.max,r.step).name("x"),u.add(c,"1",r.min,r.max,r.step).name("y"),u.add(c,"2",r.min,r.max,r.step).name("z");break;case"select":o.values[n]=r.options[0];var d=t.add(o.values,n,r.options);r.onChange&&d.onChange(r.onChange);break;case"functions":Object.keys(r.functions).map((function(e){return t.add(r.functions,e)}));break;default:s(r)}},o=this;for(var r in e)n(r)}),Re=n(466),Pe=function(){function e(e){var t=this;this.lastTime=performance.now(),this.raf=0;var n=new Re;n.showPanel(0),document.body.appendChild(n.dom);var o=function(){n.begin();var i=performance.now(),r=(i-t.lastTime)/1e3;t.lastTime=i,e(r,i/1e3),n.end(),t.raf=window.requestAnimationFrame(o)};o()}return e.prototype.destroy=function(){window.cancelAnimationFrame(this.raf)},e}(),Fe=n(800),Be=n(802),De=function(){function e(e,t,n){var o=this;if(this.gl=e,this.vao=e.createVertexArray(),this.count=t[0].data.length/t[0].size,e.bindVertexArray(this.vao),t.forEach((function(e,t){o.initBuffer(e,t)})),n){var i=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),e.STATIC_DRAW);var r=n.length;this.index={buffer:i,count:r}}e.bindVertexArray(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}return e.prototype.initBuffer=function(e,t){var n=this.gl,o=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,e.data,n.STATIC_DRAW),n.enableVertexAttribArray(t);var i="float"===e.type?n.FLOAT:"unsigned-byte"===e.type?n.UNSIGNED_BYTE:0,r="unsigned-byte"===e.type&&e.normalized;n.vertexAttribPointer(t,e.size,i,r,0,0)},e.prototype.draw=function(e){var t=this.gl;t.bindVertexArray(this.vao),this.index?t.drawElements(e,this.index.count,t.UNSIGNED_SHORT,0):t.drawArrays(e,0,this.count),t.bindVertexArray(null)},e.prototype.drawPoints=function(){this.draw(this.gl.POINTS)},e.prototype.drawLines=function(){this.draw(this.gl.LINES)},e.prototype.drawTriangles=function(){this.draw(this.gl.TRIANGLES)},e.prototype.destroy=function(){},e}(),Ne=n(827),Ue=n(389),ze=n(290),je=n(565),He=function(){for(var e=[],t=0;t<=10;t++){var n=.18*t-.9;e.push(n,.9,0),e.push(n,-.9,1);var o=.9-.18*t;e.push(-.9,o,0),e.push(.9,o,1)}return new Float32Array(e)};function Ie(){var e=new i(9);return i!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}var Ve=function(e,t,n){var o=t[0],i=t[1],r=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=n[0],f=n[1],p=n[2],m=n[3],_=n[4],v=n[5],g=n[6],b=n[7],y=n[8];return e[0]=h*o+f*a+p*c,e[1]=h*i+f*s+p*u,e[2]=h*r+f*l+p*d,e[3]=m*o+_*a+v*c,e[4]=m*i+_*s+v*u,e[5]=m*r+_*l+v*d,e[6]=g*o+b*a+y*c,e[7]=g*i+b*s+y*u,e[8]=g*r+b*l+y*d,e};function Ge(e,t,n,o){var r=new i(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=o,r}function Ke(e,t,n,o,i){return e[0]=t,e[1]=n,e[2]=o,e[3]=i,e}function Ye(e,t,n){var o=t[0],i=t[1],r=t[2],a=t[3];return e[0]=n[0]*o+n[4]*i+n[8]*r+n[12]*a,e[1]=n[1]*o+n[5]*i+n[9]*r+n[13]*a,e[2]=n[2]*o+n[6]*i+n[10]*r+n[14]*a,e[3]=n[3]*o+n[7]*i+n[11]*r+n[15]*a,e}function Xe(){var e=new i(4);return i!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}!function(){var e=new i(4);i!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();function We(){var e=new i(16);return i!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Qe(e){var t=new i(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Je(e,t,n,o){var i=t[0],r=t[1],a=t[2],s=t[3],l=i+i,c=r+r,u=a+a,d=i*l,h=i*c,f=i*u,p=r*c,m=r*u,_=a*u,v=s*l,g=s*c,b=s*u,y=o[0],w=o[1],x=o[2];return e[0]=(1-(p+_))*y,e[1]=(h+b)*y,e[2]=(f-g)*y,e[3]=0,e[4]=(h-b)*w,e[5]=(1-(d+_))*w,e[6]=(m+v)*w,e[7]=0,e[8]=(f+g)*x,e[9]=(m-v)*x,e[10]=(1-(d+p))*x,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}Ce(),ke(1,0,0),ke(0,1,0),Xe(),Xe(),Ie();var qe,Ze,$e,et,tt=function(e,t,n){var o=t[0],i=t[1],r=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],f=t[10],p=t[11],m=t[12],_=t[13],v=t[14],g=t[15],b=n[0],y=n[1],w=n[2],x=n[3];return e[0]=b*o+y*s+w*d+x*m,e[1]=b*i+y*l+w*h+x*_,e[2]=b*r+y*c+w*f+x*v,e[3]=b*a+y*u+w*p+x*g,b=n[4],y=n[5],w=n[6],x=n[7],e[4]=b*o+y*s+w*d+x*m,e[5]=b*i+y*l+w*h+x*_,e[6]=b*r+y*c+w*f+x*v,e[7]=b*a+y*u+w*p+x*g,b=n[8],y=n[9],w=n[10],x=n[11],e[8]=b*o+y*s+w*d+x*m,e[9]=b*i+y*l+w*h+x*_,e[10]=b*r+y*c+w*f+x*v,e[11]=b*a+y*u+w*p+x*g,b=n[12],y=n[13],w=n[14],x=n[15],e[12]=b*o+y*s+w*d+x*m,e[13]=b*i+y*l+w*h+x*_,e[14]=b*r+y*c+w*f+x*v,e[15]=b*a+y*u+w*p+x*g,e},nt=function(){function e(){this.translationMatrix=Ie(),this.rotationMatrix=Ie(),this.scaleMatrix=Ie(),this.matrix=Ie()}return e.prototype.setTranslation=function(e){!function(e,t){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1}(this.translationMatrix,e)},e.prototype.setRotation=function(e){!function(e,t){var n=Math.sin(t),o=Math.cos(t);e[0]=o,e[1]=n,e[2]=0,e[3]=-n,e[4]=o,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(this.rotationMatrix,e)},e.prototype.setScale=function(e){!function(e,t){e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1}(this.scaleMatrix,e)},e.prototype.reset=function(){!function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(this.matrix)},e.prototype.update=function(){return Ve(this.matrix,this.matrix,this.translationMatrix),Ve(this.matrix,this.matrix,this.rotationMatrix),Ve(this.matrix,this.matrix,this.scaleMatrix),this.matrix},e}(),ot=Xe(),it=[0,0,0],rt=[0,1,0],at=function(){function e(){this.translation=Ce(),this.rotation=Ce(),this.scale=ke(1,1,1),this.lookAtMatrixTemp=We(),this.rotationQuatTemp=Xe(),this.matrixTemp=We(),this.matrix=We(),this.direction={right:Ge(1,0,0,0),up:Ge(0,1,0,0),forward:Ge(0,0,1,0)}}return e.prototype.resetTransforms=function(){Oe(this.translation),Oe(this.rotation),function(e,t,n,o){e[0]=1,e[1]=1,e[2]=1}(this.scale)},e.prototype.resetMatrix=function(){(function(e){e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1})(this.matrix),Ke(this.direction.right,1,0,0,0),Ke(this.direction.up,0,1,0,0),Ke(this.direction.forward,0,0,1,0)},e.prototype.applyTransforms=function(){return this.lookAt?(function(e,t,n,o){var i=t[0],r=t[1],a=t[2],s=o[0],l=o[1],c=o[2],u=i-n[0],d=r-n[1],h=a-n[2],f=u*u+d*d+h*h;f>0&&(u*=f=1/Math.sqrt(f),d*=f,h*=f);var p=l*h-c*d,m=c*u-s*h,_=s*d-l*u;(f=p*p+m*m+_*_)>0&&(p*=f=1/Math.sqrt(f),m*=f,_*=f),e[0]=p,e[1]=m,e[2]=_,e[3]=0,e[4]=d*_-h*m,e[5]=h*p-u*_,e[6]=u*m-d*p,e[7]=0,e[8]=u,e[9]=d,e[10]=h,e[11]=0,e[12]=i,e[13]=r,e[14]=a,e[15]=1}(this.lookAtMatrixTemp,this.translation,this.lookAt,rt),tt(this.matrix,this.matrix,this.lookAtMatrixTemp),Je(this.matrixTemp,ot,it,this.scale)):(function(e,t,n){n*=.5;var o=t[0],i=t[1],r=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=o*l+a*s,e[1]=i*l+r*s,e[2]=r*l-i*s,e[3]=a*l-o*s}(this.rotationQuatTemp,ot,u(this.rotation[0])),function(e,t,n){n*=.5;var o=t[0],i=t[1],r=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=o*l-r*s,e[1]=i*l+a*s,e[2]=r*l+o*s,e[3]=a*l-i*s}(this.rotationQuatTemp,this.rotationQuatTemp,u(this.rotation[1])),function(e,t,n){n*=.5;var o=t[0],i=t[1],r=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=o*l+i*s,e[1]=i*l-o*s,e[2]=r*l+a*s,e[3]=a*l-r*s}(this.rotationQuatTemp,this.rotationQuatTemp,u(this.rotation[2])),Je(this.matrixTemp,this.rotationQuatTemp,this.translation,this.scale)),tt(this.matrix,this.matrix,this.matrixTemp),Ye(this.direction.right,[1,0,0,0],this.matrix),Ye(this.direction.up,[0,1,0,0],this.matrix),Ye(this.direction.forward,[0,0,1,0],this.matrix),this.matrix},e.prototype.applyTransformsRotationFirst=function(){return function(e,t,n){var o=Math.sin(n),i=Math.cos(n),r=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=r*i+c*o,e[5]=a*i+u*o,e[6]=s*i+d*o,e[7]=l*i+h*o,e[8]=c*i-r*o,e[9]=u*i-a*o,e[10]=d*i-s*o,e[11]=h*i-l*o}(this.matrix,this.matrix,u(this.rotation[0])),function(e,t,n){var o=Math.sin(n),i=Math.cos(n),r=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],h=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*i-c*o,e[1]=a*i-u*o,e[2]=s*i-d*o,e[3]=l*i-h*o,e[8]=r*o+c*i,e[9]=a*o+u*i,e[10]=s*o+d*i,e[11]=l*o+h*i}(this.matrix,this.matrix,u(this.rotation[1])),function(e,t,n){var o=Math.sin(n),i=Math.cos(n),r=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*i+c*o,e[1]=a*i+u*o,e[2]=s*i+d*o,e[3]=l*i+h*o,e[4]=c*i-r*o,e[5]=u*i-a*o,e[6]=d*i-s*o,e[7]=h*i-l*o}(this.matrix,this.matrix,u(this.rotation[2])),function(e,t,n){var o,i,r,a,s,l,c,u,d,h,f,p,m=n[0],_=n[1],v=n[2];t===e?(e[12]=t[0]*m+t[4]*_+t[8]*v+t[12],e[13]=t[1]*m+t[5]*_+t[9]*v+t[13],e[14]=t[2]*m+t[6]*_+t[10]*v+t[14],e[15]=t[3]*m+t[7]*_+t[11]*v+t[15]):(o=t[0],i=t[1],r=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],f=t[10],p=t[11],e[0]=o,e[1]=i,e[2]=r,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=h,e[10]=f,e[11]=p,e[12]=o*m+s*_+d*v+t[12],e[13]=i*m+l*_+h*v+t[13],e[14]=r*m+c*_+f*v+t[14],e[15]=a*m+u*_+p*v+t[15])}(this.matrix,this.matrix,this.translation),function(e,t,n){var o=n[0],i=n[1],r=n[2];e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]}(this.matrix,this.matrix,this.scale),Ye(this.direction.right,[1,0,0,0],this.matrix),Ye(this.direction.up,[0,1,0,0],this.matrix),Ye(this.direction.forward,[0,0,1,0],this.matrix),this.matrix},e}(),st=(.1,qe=.15,Ze=.03,$e=0,et=0,{type:"float",data:new Float32Array([[$e,et],[$e+Ze,et],[$e,et+qe],[$e,et+qe],[$e+Ze,et],[$e+Ze,et+qe],[$e+Ze,et],[$e+.1,et],[$e+Ze,et+Ze],[$e+Ze,et+Ze],[$e+.1,et],[$e+.1,et+Ze],[$e+Ze,et+.06],[$e+.2/3,et+.06],[$e+Ze,et+.09],[$e+Ze,et+.09],[$e+.2/3,et+.06],[$e+.2/3,et+.09]].map((function(e){return[e[0],-e[1]]})).flat()),size:2}),lt=n(107),ct=n(322),ut=function(){function e(e,t){this.mouseCapture=!1,this.paused=!1,this.canvas=e.canvas,this.listeners=t,t.keyDown&&(this.boundKeyDownListener=this.keyDownListener.bind(this),document.addEventListener("keydown",this.boundKeyDownListener)),t.keyUp&&(this.boundKeyUpListener=this.keyUpListener.bind(this),document.addEventListener("keyup",this.boundKeyUpListener)),t.mouseMove&&(this.boundMouseDownListener=this.mouseDownListener.bind(this),this.canvas.addEventListener("mousedown",this.boundMouseDownListener),this.boundMouseUpListener=this.mouseUpListener.bind(this),document.addEventListener("mouseup",this.boundMouseUpListener),this.boundMouseMoveListener=this.mouseMoveListener.bind(this),document.addEventListener("mousemove",this.boundMouseMoveListener)),t.wheel&&(this.boundWheelListener=this.wheelListener.bind(this),this.canvas.addEventListener("wheel",this.boundWheelListener))}return e.prototype.keyDownListener=function(e){this.paused||this.listeners.keyDown(e)},e.prototype.keyUpListener=function(e){this.paused||this.listeners.keyUp(e)},e.prototype.mouseDownListener=function(){this.mouseCapture=!0},e.prototype.mouseUpListener=function(){this.mouseCapture=!1},e.prototype.mouseMoveListener=function(e){this.mouseCapture&&!this.paused&&this.listeners.mouseMove(e)},e.prototype.wheelListener=function(e){this.paused||this.listeners.wheel(e)},e.prototype.destroy=function(){this.boundKeyDownListener&&document.removeEventListener("keydown",this.boundKeyDownListener),this.boundKeyUpListener&&document.removeEventListener("keyup",this.boundKeyUpListener),this.boundMouseDownListener&&this.canvas.removeEventListener("mousedown",this.boundMouseDownListener),this.boundMouseUpListener&&document.removeEventListener("mouseup",this.boundMouseUpListener),this.boundMouseMoveListener&&document.removeEventListener("mousemove",this.boundMouseMoveListener),this.boundWheelListener&&this.canvas.removeEventListener("wheel",this.boundWheelListener)},e}(),dt=function(){function e(e,t,n){void 0===n&&(n=1),this.projectionParams={fovy:u(45),near:.1,far:4e3},this.transform=new at,this.viewMatrix=We(),this.projectionMatrix=We(),this.viewProjectionMatrix=We(),this.canvas=e.canvas,this.controller="free"===t?new ht(e,this.transform,n):new ft(e,this.transform,n),this.mode=t}return Object.defineProperty(e.prototype,"fovy",{set:function(e){this.projectionParams.fovy=u(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"near",{set:function(e){this.projectionParams.near=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"far",{set:function(e){this.projectionParams.far=e},enumerable:!1,configurable:!0}),e.prototype.pauseInputController=function(){this.controller.inputController.paused=!0},e.prototype.startInputController=function(){this.controller.inputController.paused=!1},e.prototype.setTranslation=function(e,t){void 0===t&&(t=!1),this.controller.setTranslation(e),t&&Te(this.transform.translation,e)},e.prototype.setRotation=function(e,t){void 0===t&&(t=!1),this.controller.setRotation(e),t&&Te(this.transform.rotation,e)},e.prototype.update=function(){return function(e,t,n,o,i){var r,a=1/Math.tan(t/2);e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(r=1/(o-i),e[10]=(i+o)*r,e[14]=2*i*o*r):(e[10]=-1,e[14]=-2*o)}(this.projectionMatrix,this.projectionParams.fovy,this.canvas.width/this.canvas.height,this.projectionParams.near,this.projectionParams.far),this.transform.resetMatrix(),"free"===this.mode?this.transform.applyTransforms():this.transform.applyTransformsRotationFirst(),function(e,t){var n=t[0],o=t[1],i=t[2],r=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],_=t[14],v=t[15],g=n*s-o*a,b=n*l-i*a,y=n*c-r*a,w=o*l-i*s,x=o*c-r*s,E=i*c-r*l,A=u*m-d*p,C=u*_-h*p,S=u*v-f*p,k=d*_-h*m,T=d*v-f*m,L=h*v-f*_,O=g*L-b*T+y*k+w*S-x*C+E*A;O&&(O=1/O,e[0]=(s*L-l*T+c*k)*O,e[1]=(i*T-o*L-r*k)*O,e[2]=(m*E-_*x+v*w)*O,e[3]=(h*x-d*E-f*w)*O,e[4]=(l*S-a*L-c*C)*O,e[5]=(n*L-i*S+r*C)*O,e[6]=(_*y-p*E-v*b)*O,e[7]=(u*E-h*y+f*b)*O,e[8]=(a*T-s*S+c*A)*O,e[9]=(o*S-n*T-r*A)*O,e[10]=(p*x-m*y+v*g)*O,e[11]=(d*y-u*x-f*g)*O,e[12]=(s*C-a*k-l*A)*O,e[13]=(n*k-o*C+i*A)*O,e[14]=(m*b-p*w-_*g)*O,e[15]=(u*w-d*b+h*g)*O)}(this.viewMatrix,this.transform.matrix),tt(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this.controller.update(),this.viewProjectionMatrix},e.prototype.destroy=function(){this.controller.destroy()},e}(),ht=function(){function e(e,t,n){this.translationFlags={forward:!1,back:!1,left:!1,right:!1,up:!1,down:!1},this.mouseMoveCoef=.2,this.canvas=e.canvas,this.cameraTransform=t,this.moveCoef=n,this.translationTarget=Se(t.translation),this.rotationTarget=Se(t.rotation),this.inputController=new ut(e,{keyDown:this.keyDownListener.bind(this),keyUp:this.keyUpListener.bind(this),mouseMove:this.mouseMoveListener.bind(this)})}return e.prototype.keyDownListener=function(e){"KeyW"===e.code?this.translationFlags.forward=!0:"KeyS"===e.code?this.translationFlags.back=!0:"KeyA"===e.code?this.translationFlags.left=!0:"KeyD"===e.code?this.translationFlags.right=!0:"KeyR"===e.code?this.translationFlags.up=!0:"KeyF"===e.code&&(this.translationFlags.down=!0)},e.prototype.keyUpListener=function(e){"KeyW"===e.code?this.translationFlags.forward=!1:"KeyS"===e.code?this.translationFlags.back=!1:"KeyA"===e.code?this.translationFlags.left=!1:"KeyD"===e.code?this.translationFlags.right=!1:"KeyR"===e.code?this.translationFlags.up=!1:"KeyF"===e.code&&(this.translationFlags.down=!1)},e.prototype.mouseMoveListener=function(e){this.rotationTarget[0]+=e.movementY*this.mouseMoveCoef,this.rotationTarget[1]+=e.movementX*this.mouseMoveCoef},e.prototype.setTranslation=function(e){Te(this.translationTarget,e)},e.prototype.setRotation=function(e){Te(this.rotationTarget,e)},e.prototype.update=function(){var e=this.cameraTransform,t=e.translation,n=e.rotation,o=e.direction,i=this,r=i.moveCoef,a=i.translationFlags,s=i.translationTarget,l=i.rotationTarget;a.forward&&(s[0]-=o.forward[0]*r,s[1]-=o.forward[1]*r,s[2]-=o.forward[2]*r),a.back&&(s[0]+=o.forward[0]*r,s[1]+=o.forward[1]*r,s[2]+=o.forward[2]*r),a.left&&(s[0]-=o.right[0]*r,s[1]-=o.right[1]*r,s[2]-=o.right[2]*r),a.right&&(s[0]+=o.right[0]*r,s[1]+=o.right[1]*r,s[2]+=o.right[2]*r),a.up&&(s[0]+=o.up[0]*r,s[1]+=o.up[1]*r,s[2]+=o.up[2]*r),a.down&&(s[0]-=o.up[0]*r,s[1]-=o.up[1]*r,s[2]-=o.up[2]*r),Le(t,t,s,.2),Le(n,n,l,.2)},e.prototype.destroy=function(){this.inputController.destroy()},e}(),ft=function(){function e(e,t,n){this.mouseMoveCoef=.2,this.cameraTransform=t,this.moveCoef=n,this.zTarget=t.translation[2],this.rotationTarget=Se(t.rotation),this.inputController=new ut(e,{mouseMove:this.mouseMoveListener.bind(this),wheel:this.wheelListener.bind(this)})}return e.prototype.mouseMoveListener=function(e){this.rotationTarget[0]-=e.movementY*this.mouseMoveCoef,this.rotationTarget[1]-=e.movementX*this.mouseMoveCoef},e.prototype.wheelListener=function(e){this.zTarget=this.cameraTransform.translation[2]-e.deltaY*this.moveCoef},e.prototype.setTranslation=function(e){this.zTarget=e[2]},e.prototype.setRotation=function(e){Te(this.rotationTarget,e)},e.prototype.update=function(){var e=this.cameraTransform,t=e.translation,n=e.rotation;t[2]=t[2]*(1-.2)+.2*this.zTarget,Le(n,n,this.rotationTarget,.2)},e.prototype.destroy=function(){this.inputController.destroy()},e}(),pt=n(10),mt=n(446),_t=function(e,t){for(var n=0,o=t.length,i=e.length;n<o;n++,i++)e[i]=t[n];return e},vt=function(e){var t=new d(e,pt,mt,{matrix:{type:"matrix4fv",value:We()}},["a_position","a_color"]),n=function(){for(var e=[],t=0;t<=10;t++){var n=.1*t-.5;e.push(n,.5,0),e.push(n,-.5,0);var o=.5-.1*t;e.push(-.5,o,0),e.push(.5,o,0)}return{position:{type:"float",data:new Float32Array(e),size:3},color:{type:"unsigned-byte",data:new Uint8Array(_t(_t(_t([],Array(60).fill(255)),[[0,255,0,0,255,0],[255,0,0,255,0,0]]),Array(60).fill(255)).flat()),size:3,normalized:!0}}}();return{program:t,vao:new De(e,[n.position,n.color]),transform:new at}},gt=n(778),bt=n(584),yt=function(e){var t=new d(e,gt,bt,{matrix:{type:"matrix4fv",value:We()}},["a_position","a_color"]),n={position:{type:"float",data:new Float32Array([[0,0,0,0,150,0,30,0,0],[0,150,0,30,150,0,30,0,0],[30,0,0,30,30,0,100,0,0],[30,30,0,100,30,0,100,0,0],[30,60,0,30,90,0,67,60,0],[30,90,0,67,90,0,67,60,0],[0,0,30,30,0,30,0,150,30],[0,150,30,30,0,30,30,150,30],[30,0,30,100,0,30,30,30,30],[30,30,30,100,0,30,100,30,30],[30,60,30,67,60,30,30,90,30],[30,90,30,67,60,30,67,90,30],[0,0,0,100,0,0,100,0,30],[0,0,0,100,0,30,0,0,30],[100,0,0,100,30,0,100,30,30],[100,0,0,100,30,30,100,0,30],[30,30,0,30,30,30,100,30,30],[30,30,0,100,30,30,100,30,0],[30,30,0,30,60,30,30,30,30],[30,30,0,30,60,0,30,60,30],[30,60,0,67,60,30,30,60,30],[30,60,0,67,60,0,67,60,30],[67,60,0,67,90,30,67,60,30],[67,60,0,67,90,0,67,90,30],[30,90,0,30,90,30,67,90,30],[30,90,0,67,90,30,67,90,0],[30,90,0,30,150,30,30,90,30],[30,90,0,30,150,0,30,150,30],[0,150,0,0,150,30,30,150,30],[0,150,0,30,150,30,30,150,0],[0,0,0,0,0,30,0,150,30],[0,0,0,0,150,30,0,150,0]].flat()),size:3},color:{type:"unsigned-byte",data:new Uint8Array([[200,70,120,200,70,120,200,70,120],[200,70,120,200,70,120,200,70,120],[200,70,120,200,70,120,200,70,120],[200,70,120,200,70,120,200,70,120],[200,70,120,200,70,120,200,70,120],[200,70,120,200,70,120,200,70,120],[80,70,200,80,70,200,80,70,200],[80,70,200,80,70,200,80,70,200],[80,70,200,80,70,200,80,70,200],[80,70,200,80,70,200,80,70,200],[80,70,200,80,70,200,80,70,200],[80,70,200,80,70,200,80,70,200],[70,200,210,70,200,210,70,200,210],[70,200,210,70,200,210,70,200,210],[200,200,70,200,200,70,200,200,70],[200,200,70,200,200,70,200,200,70],[210,100,70,210,100,70,210,100,70],[210,100,70,210,100,70,210,100,70],[210,160,70,210,160,70,210,160,70],[210,160,70,210,160,70,210,160,70],[70,180,210,70,180,210,70,180,210],[70,180,210,70,180,210,70,180,210],[100,70,210,100,70,210,100,70,210],[100,70,210,100,70,210,100,70,210],[76,210,100,76,210,100,76,210,100],[76,210,100,76,210,100,76,210,100],[140,210,80,140,210,80,140,210,80],[140,210,80,140,210,80,140,210,80],[90,130,110,90,130,110,90,130,110],[90,130,110,90,130,110,90,130,110],[160,160,220,160,160,220,160,160,220],[160,160,220,160,160,220,160,160,220]].flat()),size:3,normalized:!0}};return{program:t,vao:new De(e,[n.position,n.color]),transform:new at}},wt=n(528),xt=n(51);i=Array;var Et={1:function(e){new h(e);var t=new d(e,p,m,{},["a_position"]),n=new f(e,"a_position",[0,0],2,t);setTimeout((function(){t.use(),n.prepare(),n.drawPoints()}),100)},2:function(e){var t=new h(e),n=new d(e,Fe,Be,{pointSize:{type:"f",value:50},angle:{type:"f",value:0},pointColor:{type:"4f",value:[1,1,1,1]}},["a_position"]),o=new f(e,"a_position",[0,0,0,.1,.1,.1,-.1,-.1,-.1],3,n),i=new Me({basePointSize:{type:"float",default:50,min:0,max:300,step:.01},red:{type:"float",default:l(),min:0,max:1,step:.01},green:{type:"float",default:l(),min:0,max:1,step:.01},blue:{type:"float",default:l(),min:0,max:1,step:.01}}),r=0,a=0;new Pe((function(e){r+=3*e;var s=10*Math.sin(r)+i.values.basePointSize;a=(a+.5*e)%(2*Math.PI),t.clear(),n.use(),n.setUniform("pointSize",s),n.setUniform("angle",a),n.setUniform("pointColor",[i.values.red,i.values.green,i.values.blue,1]),o.prepare(),o.drawPoints()}))},3:function(e){var t=new h(e),n=new d(e,Ne,Ue,{angle:{type:"f",value:0}},["a_position"]),o=new Float32Array([[-.1,.1],[.1,-.1],[-.1,-.1],[.1,.1]].flat()),i=new De(e,[{type:"float",data:o,size:2}]),r=new Float32Array([[0,0],[-.05,.1],[-.1,.05],[.05,.1],[.1,.05],[-.1,-.05],[-.05,-.1],[.1,-.05],[.05,-.1]].flat()),a=new De(e,[{type:"float",data:r,size:2}],[0,1,2,0,3,4,0,5,6,0,7,8]),s=0;new Pe((function(e){s=(s+.5*e)%(2*Math.PI),t.clear(),n.use(),n.setUniform("angle",s),a.drawTriangles(),i.drawPoints()}))},4:function(e){var t=new h(e),n=[[.8,.8,.8],[1,0,0]].flat(),o=new d(e,ze,je,{color:{type:"3fv",value:n}},["a_position"]),i=new De(e,[{type:"float",data:He(),size:3}]);new Pe((function(){t.clear(),o.use(),o.setUniform("color",n),i.drawLines()}))},5:function(e){var t=new h(e),n=new d(e,lt,ct,{matrix:{type:"matrix3fv",value:Ie()}},["a_position"]),o=new Me({translation:{type:"vec2",default:[.12,0],min:-.2,max:.2,step:.001},rotation:{type:"float",default:15,min:0,max:360,step:.01},scale:{type:"vec2",default:[.8,.8],min:0,max:1.4,step:.01}}),i=new De(e,[st]),r=new nt;new Pe((function(){t.clear(),n.use(),n.setStandardUniforms(),r.setTranslation(o.values.translation),r.setRotation(u(o.values.rotation)),r.setScale(o.values.scale),r.reset();for(var e=0;e<5;++e)n.setUniform("matrix",r.update()),i.drawTriangles()}))},6:function(e){var t=new h(e),n=vt(e);n.transform.scale=[200,200,200];var o=yt(e),i=new dt(e,"free",10),r=new dt(e,"orbit",10),a=r;i.pauseInputController();var s=function(e){void 0===e&&(e=!1),i.setTranslation([0,-300,200],e),i.setRotation([60,0,0],e),r.setRotation([64,0,0],e),r.setTranslation([0,0,400],e)};s(!0);var l=new Me({rotation:{type:"vec3",default:[90,0,45],min:0,max:360,step:.01},translation:{type:"vec3",default:[0,0,0],min:-400,max:400,step:.01},scale:{type:"vec3",default:[1,1,1],min:-3,max:3,step:.01},fovy:{type:"float",default:45,min:0,max:180,step:.01},near:{type:"float",default:.1,min:.1,max:1e3,step:.01},far:{type:"float",default:5e3,min:0,max:5e3,step:.01},camera:{type:"select",options:["orbit","free"],onChange:function(e){a.pauseInputController(),(a="orbit"===e?r:i).startInputController()}},buttons:{type:"functions",functions:{resetCameras:s}}});e.enable(e.DEPTH_TEST),new Pe((function(){t.clear(),a.fovy=l.values.fovy,a.near=l.values.near,a.far=l.values.far,a.update(),n.program.use(),n.transform.matrix=Qe(a.viewProjectionMatrix),n.transform.applyTransforms(),n.program.setUniform("matrix",n.transform.matrix),n.vao.drawLines(),o.program.use(),o.transform.matrix=Qe(a.viewProjectionMatrix),o.transform.translation=l.values.translation,o.transform.rotation=l.values.rotation,o.transform.scale=l.values.scale,o.transform.applyTransforms(),o.program.setUniform("matrix",o.transform.matrix),o.vao.drawTriangles()}))},7:function(e){var t=new h(e),n=vt(e);n.transform.scale=[10,10,10];var o=function(e){var t=new d(e,wt,xt,{matrix:{type:"matrix4fv",value:We()}},["a_position","a_color"]),n={position:{type:"float",data:new Float32Array([[0,0,0,1,0,0],[0,0,0,0,1,0],[0,0,0,0,0,1]].flat()),size:3},color:{type:"unsigned-byte",data:new Uint8Array([[255,0,0,255,0,0],[0,255,0,0,255,0],[0,0,255,0,0,255]].flat()),size:3,normalized:!0}};return{program:t,vao:new De(e,[n.position,n.color]),transform:new at}}(e),i=yt(e);i.transform.scale=[.01,.01,.01],i.transform.lookAt=[0,0,0];var r=new dt(e,"orbit");r.setTranslation([0,0,15]),e.enable(e.DEPTH_TEST),new Pe((function(e,a){var s=.5*a,l=[2.5*Math.cos(s),2.5*Math.sin(s),2.5*Math.sin(s)];t.clear(),r.update(),n.program.use(),n.transform.matrix=Qe(r.viewProjectionMatrix),n.transform.applyTransforms(),n.program.setUniform("matrix",n.transform.matrix),n.vao.drawLines(),i.program.use(),i.transform.matrix=Qe(r.viewProjectionMatrix),i.transform.translation=l,i.transform.applyTransforms(),i.program.setUniform("matrix",i.transform.matrix),i.vao.drawTriangles(),o.program.use();for(var c=-5;c<=5;c++)for(var u=-5;u<=5;u++)o.transform.resetTransforms(),o.transform.translation=[c,u,0],o.transform.lookAt=l,o.transform.matrix=Qe(r.viewProjectionMatrix),o.transform.applyTransforms(),o.program.setUniform("matrix",o.transform.matrix),o.vao.drawLines()}))}};window.addEventListener("load",(function(){var e=new URLSearchParams(window.location.search),t=Number(e.get("scene"));if(!(t in Et)){var n=Object.keys(Et);return e.set("scene",n[n.length-1]),void(window.location.search=e.toString())}var o=document.createElement("button");o.innerText="<",o.onclick=function(){e.set("scene",String(t-1)),window.location.search=e.toString()};var i=document.createElement("button");i.onclick=function(){e.set("scene",String(t+1)),window.location.search=e.toString()},i.innerText=">";var r=document.createElement("div");r.id="switcher",t-1 in Et||(o.disabled=!0),t+1 in Et||(i.disabled=!0),r.appendChild(o),r.appendChild(i),document.body.appendChild(r);var a=document.createElement("div");a.id="fps",document.body.appendChild(a);var s=document.createElement("canvas");document.body.appendChild(s);var l=s.getContext("webgl2");if(null===l)throw new Error("Cannot get webgl context");Et[t](l)}))})()})();